{"ast":null,"code":"var _jsxFileName = \"D:\\\\JTCSM\\\\c\\\\frontend\\\\src\\\\components\\\\Community.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport API from '../api';\nimport { ThemeContext } from '../ThemeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Community({\n  username\n}) {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [text, setText] = useState('');\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [commentText, setCommentText] = useState({});\n  const [comments, setComments] = useState({});\n  const [likes, setLikes] = useState({});\n  const [liked, setLiked] = useState({});\n  const [bgImages, setBgImages] = useState([]);\n  const [bgIndex, setBgIndex] = useState(0);\n  const [bgFade, setBgFade] = useState(true);\n  const [reporting, setReporting] = useState(null); // {type, id}\n  const [reportReason, setReportReason] = useState('');\n  const {\n    theme\n  } = React.useContext(ThemeContext);\n\n  // 获取所有帖子\n  const fetchPosts = async () => {\n    const res = await API.getPosts();\n    setPosts(res.data);\n    // 获取每个帖子的评论和点赞\n    res.data.forEach(post => {\n      fetchComments(post.id);\n      fetchLikes(post.id);\n    });\n  };\n  useEffect(() => {\n    fetchPosts();\n    // eslint-disable-next-line\n  }, []);\n\n  // 获取所有风景图片\n  useEffect(() => {\n    async function fetchAllImages() {\n      const dests = await API.get('/destinations');\n      let imgs = [];\n      for (let d of dests.data) {\n        const res = await API.get(`/destinations/${d.id}/scenery`);\n        if (res.data && res.data.length > 0) {\n          imgs = imgs.concat(res.data.map(s => `http://localhost:3001${s.image}`));\n        }\n      }\n      setBgImages(imgs);\n    }\n    fetchAllImages();\n  }, []);\n\n  // 轮播背景\n  useEffect(() => {\n    if (bgImages.length === 0) return;\n    setBgFade(false);\n    const timer = setInterval(() => {\n      setBgFade(true);\n      setTimeout(() => {\n        setBgIndex(i => (i + 1) % bgImages.length);\n        setBgFade(false);\n      }, 400);\n    }, 4000);\n    return () => clearInterval(timer);\n  }, [bgImages]);\n\n  // 处理图片选择\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    setImage(file);\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => setPreview(reader.result);\n      reader.readAsDataURL(file);\n    } else {\n      setPreview(null);\n    }\n  };\n\n  // 发布分享\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!text && !image) return;\n    const formData = new FormData();\n    formData.append('text', text);\n    formData.append('username', username);\n    if (image) formData.append('image', image);\n    await API.createPost(formData);\n    setText('');\n    setImage(null);\n    setPreview(null);\n    fetchPosts();\n  };\n\n  // 评论相关\n  const fetchComments = async postId => {\n    const res = await API.getComments(postId);\n    setComments(prev => ({\n      ...prev,\n      [postId]: res.data\n    }));\n  };\n  const handleComment = async postId => {\n    if (!commentText[postId]) return;\n    await API.createComment({\n      postId,\n      text: commentText[postId],\n      username\n    });\n    setCommentText(prev => ({\n      ...prev,\n      [postId]: ''\n    }));\n    fetchComments(postId);\n  };\n\n  // 点赞相关\n  const fetchLikes = async postId => {\n    const res = await API.getLikes(postId);\n    setLikes(prev => ({\n      ...prev,\n      [postId]: res.data.count\n    }));\n    // 判断当前用户是否已点赞\n    if (username) {\n      const res2 = await API.getComments(postId); // 用评论接口判断点赞用户（如需优化可加新接口）\n      setLiked(prev => ({\n        ...prev,\n        [postId]: false\n      })); // 简化：不判断，点一次切换\n    }\n  };\n  const handleLike = async postId => {\n    await API.toggleLike({\n      postId,\n      username\n    });\n    fetchLikes(postId);\n  };\n\n  // 删除帖子\n  const handleDelete = async postId => {\n    if (!window.confirm('确定要删除这条动态吗？')) return;\n    await API.deletePost(postId, username);\n    fetchPosts();\n  };\n  const handleReport = async () => {\n    if (!reportReason) return alert('请填写举报原因');\n    await API.reportContent({\n      type: reporting.type,\n      targetId: reporting.id,\n      reason: reportReason,\n      username\n    });\n    setReporting(null);\n    setReportReason('');\n    alert('举报已提交');\n  };\n  const handleDeleteComment = async commentId => {\n    if (!window.confirm('确定要删除这条评论吗？')) return;\n    await API.deleteComment(commentId, username);\n    fetchComments(reporting.id); // 重新获取评论列表\n    setReporting(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      backgroundImage: bgImages.length ? `url(${bgImages[bgIndex]})` : '',\n      backgroundSize: 'cover',\n      backgroundPosition: 'center',\n      position: 'relative',\n      transition: 'background-image 0.5s'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        background: theme === 'dark' ? 'rgba(0,0,0,0.7)' : 'rgba(0,0,0,0.4)',\n        zIndex: 0,\n        transition: 'opacity 0.4s'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        zIndex: 1,\n        maxWidth: 600,\n        width: '96%',\n        margin: '0 auto',\n        padding: '4vw 2vw',\n        background: theme === 'dark' ? 'rgba(30,30,30,0.7)' : 'rgba(255,255,255,0.7)',\n        borderRadius: 12,\n        boxShadow: '0 2px 8px #eee',\n        marginTop: '6vw',\n        backdropFilter: 'blur(2px)',\n        color: theme === 'dark' ? '#eee' : '#222',\n        transition: 'background 0.4s,color 0.4s'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: 'center',\n          fontSize: '6vw',\n          marginBottom: '4vw'\n        },\n        children: \"\\u793E\\u533A\\u5206\\u4EAB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        style: {\n          marginBottom: 32\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: text,\n          onChange: e => setText(e.target.value),\n          placeholder: \"\\u5206\\u4EAB\\u4F60\\u7684\\u60F3\\u6CD5...\",\n          rows: 3,\n          style: {\n            width: '100%',\n            maxWidth: '100%',\n            minWidth: 0,\n            boxSizing: 'border-box',\n            marginBottom: 12,\n            padding: 12,\n            borderRadius: 6,\n            border: '1.5px solid #bbb',\n            fontSize: '4vw',\n            minHeight: 60,\n            background: '#fafbfc',\n            outline: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleImageChange,\n          style: {\n            marginBottom: 12\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), preview && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 12\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: preview,\n            alt: \"\\u9884\\u89C8\",\n            style: {\n              maxWidth: '80vw',\n              borderRadius: 8\n            },\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 57\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            padding: '10px 0',\n            width: '100%',\n            borderRadius: 6,\n            background: '#007bff',\n            color: '#fff',\n            border: 'none',\n            fontSize: '4vw',\n            marginBottom: 8\n          },\n          children: \"\\u53D1\\u5E03\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [posts.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#888',\n            textAlign: 'center'\n          },\n          children: \"\\u6682\\u65E0\\u5206\\u4EAB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 34\n        }, this), posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderBottom: '1px solid #eee',\n            padding: '16px 0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 'bold',\n              marginBottom: 4,\n              fontSize: '4vw'\n            },\n            children: [post.username, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#aaa',\n                fontSize: '3vw'\n              },\n              children: new Date(post.createdAt).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 33\n            }, this), post.username === username && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleDelete(post.id),\n              style: {\n                marginLeft: 12,\n                color: 'red',\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '3.5vw'\n              },\n              children: \"\\u5220\\u9664\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setReporting({\n                type: 'post',\n                id: post.id\n              }),\n              style: {\n                marginLeft: 12,\n                color: '#ff9800',\n                background: 'none',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '3.5vw'\n              },\n              children: \"\\u4E3E\\u62A5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this), post.text && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 8,\n              fontSize: '4vw'\n            },\n            children: post.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 29\n          }, this), post.image && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `http://localhost:3001${post.image}`,\n            alt: \"\\u5206\\u4EAB\",\n            style: {\n              maxWidth: '90vw',\n              borderRadius: 8,\n              marginBottom: 8\n            },\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 12,\n              margin: '8px 0'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleLike(post.id),\n              style: {\n                color: liked[post.id] ? 'red' : '#333',\n                fontSize: '5vw',\n                background: 'none',\n                border: 'none',\n                transition: 'transform 0.2s',\n                transform: liked[post.id] ? 'scale(1.2)' : 'scale(1)'\n              },\n              children: [\"\\uD83D\\uDC4D \", likes[post.id] || 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '3.5vw',\n                color: '#555',\n                marginBottom: 4\n              },\n              children: \"\\u8BC4\\u8BBA\\uFF1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), (comments[post.id] || []).map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '3.5vw',\n                marginBottom: 2,\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: [c.username, \"\\uFF1A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 21\n              }, this), c.text, c.username === username && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteComment(c.id),\n                style: {\n                  marginLeft: 8,\n                  color: 'red',\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '3vw'\n                },\n                children: \"\\u5220\\u9664\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setReporting({\n                  type: 'comment',\n                  id: c.id\n                }),\n                style: {\n                  marginLeft: 8,\n                  color: '#ff9800',\n                  background: 'none',\n                  border: 'none',\n                  cursor: 'pointer',\n                  fontSize: '3vw'\n                },\n                children: \"\\u4E3E\\u62A5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 21\n              }, this)]\n            }, c.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: 8,\n                marginTop: 4\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                value: commentText[post.id] || '',\n                onChange: e => setCommentText(prev => ({\n                  ...prev,\n                  [post.id]: e.target.value\n                })),\n                placeholder: \"\\u5199\\u8BC4\\u8BBA...\",\n                style: {\n                  flex: 1,\n                  borderRadius: 4,\n                  border: '1px solid #ccc',\n                  padding: 8,\n                  fontSize: '4vw'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleComment(post.id),\n                style: {\n                  borderRadius: 4,\n                  background: '#eee',\n                  border: 'none',\n                  padding: '4px 12px',\n                  fontSize: '4vw'\n                },\n                children: \"\\u53D1\\u9001\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this)]\n        }, post.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), reporting && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: '100vw',\n        height: '100vh',\n        background: 'rgba(0,0,0,0.4)',\n        zIndex: 1000,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#fff',\n          borderRadius: 8,\n          padding: 24,\n          minWidth: 260\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\u4E3E\\u62A5\", reporting.type === 'post' ? '动态' : '评论']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: reportReason,\n          onChange: e => setReportReason(e.target.value),\n          placeholder: \"\\u8BF7\\u586B\\u5199\\u4E3E\\u62A5\\u539F\\u56E0\",\n          style: {\n            width: '100%',\n            minHeight: 60,\n            margin: '12px 0',\n            padding: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'flex-end',\n            gap: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setReporting(null),\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleReport,\n            style: {\n              background: '#ff9800',\n              color: '#fff',\n              border: 'none',\n              borderRadius: 4,\n              padding: '4px 16px'\n            },\n            children: \"\\u63D0\\u4EA4\\u4E3E\\u62A5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n}\n_s(Community, \"dEDKgrOUQWZBRJmetiy2j2///+Q=\");\n_c = Community;\nvar _c;\n$RefreshReg$(_c, \"Community\");","map":{"version":3,"names":["React","useState","useEffect","API","ThemeContext","jsxDEV","_jsxDEV","Community","username","_s","posts","setPosts","text","setText","image","setImage","preview","setPreview","commentText","setCommentText","comments","setComments","likes","setLikes","liked","setLiked","bgImages","setBgImages","bgIndex","setBgIndex","bgFade","setBgFade","reporting","setReporting","reportReason","setReportReason","theme","useContext","fetchPosts","res","getPosts","data","forEach","post","fetchComments","id","fetchLikes","fetchAllImages","dests","get","imgs","d","length","concat","map","s","timer","setInterval","setTimeout","i","clearInterval","handleImageChange","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","formData","FormData","append","createPost","postId","getComments","prev","handleComment","createComment","getLikes","count","res2","handleLike","toggleLike","handleDelete","window","confirm","deletePost","handleReport","alert","reportContent","type","targetId","reason","handleDeleteComment","commentId","deleteComment","style","minHeight","backgroundImage","backgroundSize","backgroundPosition","position","transition","children","top","left","width","height","background","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","padding","borderRadius","boxShadow","marginTop","backdropFilter","color","textAlign","fontSize","marginBottom","onSubmit","value","onChange","placeholder","rows","minWidth","boxSizing","border","outline","accept","src","alt","loading","borderBottom","fontWeight","Date","createdAt","toLocaleString","onClick","marginLeft","cursor","display","alignItems","gap","transform","c","flex","justifyContent","_c","$RefreshReg$"],"sources":["D:/JTCSM/c/frontend/src/components/Community.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport API from '../api';\r\nimport { ThemeContext } from '../ThemeContext';\r\n\r\nexport default function Community({ username }) {\r\n  const [posts, setPosts] = useState([]);\r\n  const [text, setText] = useState('');\r\n  const [image, setImage] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [commentText, setCommentText] = useState({});\r\n  const [comments, setComments] = useState({});\r\n  const [likes, setLikes] = useState({});\r\n  const [liked, setLiked] = useState({});\r\n  const [bgImages, setBgImages] = useState([]);\r\n  const [bgIndex, setBgIndex] = useState(0);\r\n  const [bgFade, setBgFade] = useState(true);\r\n  const [reporting, setReporting] = useState(null); // {type, id}\r\n  const [reportReason, setReportReason] = useState('');\r\n  const { theme } = React.useContext(ThemeContext);\r\n\r\n  // 获取所有帖子\r\n  const fetchPosts = async () => {\r\n    const res = await API.getPosts();\r\n    setPosts(res.data);\r\n    // 获取每个帖子的评论和点赞\r\n    res.data.forEach(post => {\r\n      fetchComments(post.id);\r\n      fetchLikes(post.id);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPosts();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // 获取所有风景图片\r\n  useEffect(() => {\r\n    async function fetchAllImages() {\r\n      const dests = await API.get('/destinations');\r\n      let imgs = [];\r\n      for (let d of dests.data) {\r\n        const res = await API.get(`/destinations/${d.id}/scenery`);\r\n        if (res.data && res.data.length > 0) {\r\n          imgs = imgs.concat(res.data.map(s => `http://localhost:3001${s.image}`));\r\n        }\r\n      }\r\n      setBgImages(imgs);\r\n    }\r\n    fetchAllImages();\r\n  }, []);\r\n\r\n  // 轮播背景\r\n  useEffect(() => {\r\n    if (bgImages.length === 0) return;\r\n    setBgFade(false);\r\n    const timer = setInterval(() => {\r\n      setBgFade(true);\r\n      setTimeout(() => {\r\n        setBgIndex(i => (i + 1) % bgImages.length);\r\n        setBgFade(false);\r\n      }, 400);\r\n    }, 4000);\r\n    return () => clearInterval(timer);\r\n  }, [bgImages]);\r\n\r\n  // 处理图片选择\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setImage(file);\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => setPreview(reader.result);\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      setPreview(null);\r\n    }\r\n  };\r\n\r\n  // 发布分享\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!text && !image) return;\r\n    const formData = new FormData();\r\n    formData.append('text', text);\r\n    formData.append('username', username);\r\n    if (image) formData.append('image', image);\r\n    await API.createPost(formData);\r\n    setText('');\r\n    setImage(null);\r\n    setPreview(null);\r\n    fetchPosts();\r\n  };\r\n\r\n  // 评论相关\r\n  const fetchComments = async (postId) => {\r\n    const res = await API.getComments(postId);\r\n    setComments(prev => ({ ...prev, [postId]: res.data }));\r\n  };\r\n  const handleComment = async (postId) => {\r\n    if (!commentText[postId]) return;\r\n    await API.createComment({ postId, text: commentText[postId], username });\r\n    setCommentText(prev => ({ ...prev, [postId]: '' }));\r\n    fetchComments(postId);\r\n  };\r\n\r\n  // 点赞相关\r\n  const fetchLikes = async (postId) => {\r\n    const res = await API.getLikes(postId);\r\n    setLikes(prev => ({ ...prev, [postId]: res.data.count }));\r\n    // 判断当前用户是否已点赞\r\n    if (username) {\r\n      const res2 = await API.getComments(postId); // 用评论接口判断点赞用户（如需优化可加新接口）\r\n      setLiked(prev => ({ ...prev, [postId]: false })); // 简化：不判断，点一次切换\r\n    }\r\n  };\r\n  const handleLike = async (postId) => {\r\n    await API.toggleLike({ postId, username });\r\n    fetchLikes(postId);\r\n  };\r\n\r\n  // 删除帖子\r\n  const handleDelete = async (postId) => {\r\n    if (!window.confirm('确定要删除这条动态吗？')) return;\r\n    await API.deletePost(postId, username);\r\n    fetchPosts();\r\n  };\r\n\r\n  const handleReport = async () => {\r\n    if (!reportReason) return alert('请填写举报原因');\r\n    await API.reportContent({ type: reporting.type, targetId: reporting.id, reason: reportReason, username });\r\n    setReporting(null);\r\n    setReportReason('');\r\n    alert('举报已提交');\r\n  };\r\n\r\n  const handleDeleteComment = async (commentId) => {\r\n    if (!window.confirm('确定要删除这条评论吗？')) return;\r\n    await API.deleteComment(commentId, username);\r\n    fetchComments(reporting.id); // 重新获取评论列表\r\n    setReporting(null);\r\n  };\r\n\r\n  return (\r\n    <div style={{ minHeight: '100vh', backgroundImage: bgImages.length ? `url(${bgImages[bgIndex]})` : '', backgroundSize: 'cover', backgroundPosition: 'center', position: 'relative', transition: 'background-image 0.5s' }}>\r\n      <div style={{ position: 'absolute', top:0, left:0, width:'100%', height:'100%', background: theme==='dark'?'rgba(0,0,0,0.7)':'rgba(0,0,0,0.4)', zIndex:0, transition: 'opacity 0.4s' }} />\r\n      <div style={{ position:'relative', zIndex:1, maxWidth: 600, width: '96%', margin: '0 auto', padding: '4vw 2vw', background: theme==='dark'?'rgba(30,30,30,0.7)':'rgba(255,255,255,0.7)', borderRadius: 12, boxShadow: '0 2px 8px #eee', marginTop: '6vw', backdropFilter: 'blur(2px)', color: theme==='dark'?'#eee':'#222', transition:'background 0.4s,color 0.4s' }}>\r\n        <h2 style={{ textAlign: 'center', fontSize: '6vw', marginBottom: '4vw' }}>社区分享</h2>\r\n        <form onSubmit={handleSubmit} style={{ marginBottom: 32 }}>\r\n          <textarea\r\n            value={text}\r\n            onChange={e => setText(e.target.value)}\r\n            placeholder=\"分享你的想法...\"\r\n            rows={3}\r\n            style={{ width: '100%', maxWidth: '100%', minWidth: 0, boxSizing: 'border-box', marginBottom: 12, padding: 12, borderRadius: 6, border: '1.5px solid #bbb', fontSize: '4vw', minHeight: 60, background: '#fafbfc', outline: 'none' }}\r\n          />\r\n          <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} style={{ marginBottom: 12 }} />\r\n          {preview && <div style={{ marginBottom: 12 }}><img src={preview} alt=\"预览\" style={{ maxWidth: '80vw', borderRadius: 8 }} loading=\"lazy\" /></div>}\r\n          <button type=\"submit\" style={{ padding: '10px 0', width: '100%', borderRadius: 6, background: '#007bff', color: '#fff', border: 'none', fontSize: '4vw', marginBottom: 8 }}>发布</button>\r\n        </form>\r\n        <div>\r\n          {posts.length === 0 && <div style={{ color: '#888', textAlign: 'center' }}>暂无分享</div>}\r\n          {posts.map(post => (\r\n            <div key={post.id} style={{ borderBottom: '1px solid #eee', padding: '16px 0' }}>\r\n              <div style={{ fontWeight: 'bold', marginBottom: 4, fontSize: '4vw' }}>\r\n                {post.username} <span style={{ color: '#aaa', fontSize: '3vw' }}>{new Date(post.createdAt).toLocaleString()}</span>\r\n                {post.username === username && (\r\n                  <button onClick={() => handleDelete(post.id)} style={{ marginLeft: 12, color: 'red', background: 'none', border: 'none', cursor: 'pointer', fontSize: '3.5vw' }}>删除</button>\r\n                )}\r\n                <button onClick={() => setReporting({type:'post',id:post.id})} style={{ marginLeft: 12, color: '#ff9800', background: 'none', border: 'none', cursor: 'pointer', fontSize: '3.5vw' }}>举报</button>\r\n              </div>\r\n              {post.text && <div style={{ marginBottom: 8, fontSize: '4vw' }}>{post.text}</div>}\r\n              {post.image && <img src={`http://localhost:3001${post.image}`} alt=\"分享\" style={{ maxWidth: '90vw', borderRadius: 8, marginBottom: 8 }} loading=\"lazy\" />}\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: 12, margin: '8px 0' }}>\r\n                <button onClick={() => handleLike(post.id)} style={{ color: liked[post.id] ? 'red' : '#333', fontSize: '5vw', background: 'none', border: 'none', transition: 'transform 0.2s', transform: liked[post.id] ? 'scale(1.2)' : 'scale(1)' }}>👍 {likes[post.id] || 0}</button>\r\n              </div>\r\n              {/* 评论区 */}\r\n              <div style={{ marginTop: 8 }}>\r\n                <div style={{ fontSize: '3.5vw', color: '#555', marginBottom: 4 }}>评论：</div>\r\n                {(comments[post.id] || []).map(c => (\r\n                  <div key={c.id} style={{ fontSize: '3.5vw', marginBottom: 2, display:'flex', alignItems:'center' }}>\r\n                    <b>{c.username}：</b>{c.text}\r\n                    {c.username === username && (\r\n                      <button onClick={() => handleDeleteComment(c.id)} style={{ marginLeft: 8, color: 'red', background: 'none', border: 'none', cursor: 'pointer', fontSize: '3vw' }}>删除</button>\r\n                    )}\r\n                    <button onClick={() => setReporting({type:'comment',id:c.id})} style={{ marginLeft: 8, color: '#ff9800', background: 'none', border: 'none', cursor: 'pointer', fontSize: '3vw' }}>举报</button>\r\n                  </div>\r\n                ))}\r\n                <div style={{ display: 'flex', gap: 8, marginTop: 4 }}>\r\n                  <input\r\n                    value={commentText[post.id] || ''}\r\n                    onChange={e => setCommentText(prev => ({ ...prev, [post.id]: e.target.value }))}\r\n                    placeholder=\"写评论...\"\r\n                    style={{ flex: 1, borderRadius: 4, border: '1px solid #ccc', padding: 8, fontSize: '4vw' }}\r\n                  />\r\n                  <button onClick={() => handleComment(post.id)} style={{ borderRadius: 4, background: '#eee', border: 'none', padding: '4px 12px', fontSize: '4vw' }}>发送</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* 举报弹窗 */}\r\n      {reporting && (\r\n        <div style={{ position:'fixed', left:0, top:0, width:'100vw', height:'100vh', background:'rgba(0,0,0,0.4)', zIndex:1000, display:'flex', alignItems:'center', justifyContent:'center' }}>\r\n          <div style={{ background:'#fff', borderRadius:8, padding:24, minWidth:260 }}>\r\n            <h3>举报{reporting.type==='post'?'动态':'评论'}</h3>\r\n            <textarea value={reportReason} onChange={e=>setReportReason(e.target.value)} placeholder=\"请填写举报原因\" style={{width:'100%',minHeight:60,margin:'12px 0',padding:8}} />\r\n            <div style={{display:'flex',justifyContent:'flex-end',gap:12}}>\r\n              <button onClick={()=>setReporting(null)}>取消</button>\r\n              <button onClick={handleReport} style={{background:'#ff9800',color:'#fff',border:'none',borderRadius:4,padding:'4px 16px'}}>提交举报</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}